
// src/components/NavBar.js
import React from "react";
import { useLocation, useNavigate } from "react-router-dom";
import "./Navbar.css";

const items = [
  { to: "/", label: "Home" },
  { to: "/plans", label: "Plans" },
  { to: "/payment-plans", label: "Payment Plans" },
  { to: "/debts", label: "Debts" },
  { to: "/history", label: "History" },
  { to: "/friends", label: "Friends" },
  { to: "/payment-method", label: "Payment Method" },
  { to: "/settings", label: "Profile" },
];

export default function NavBar() {
  const navigate = useNavigate();
  const { pathname } = useLocation();

  // If the brand/whole sidebar is accidentally wrapped in <a href="/">,
  // cancel that navigation when clicking inside the navbar.
  const stopOuterLink = (e) => {
    e.preventDefault();
    e.stopPropagation();
  };

  const go = (to) => (e) => {
    // cancel any outer anchor default + bubbling
    e.preventDefault();
    e.stopPropagation();
    if (to !== pathname) navigate(to);
  };

  return (
    <nav className="pm-navbar" onClick={stopOuterLink} onMouseDown={stopOuterLink}>
      <div
        className="pm-navbar__brand"
        role="button"
        tabIndex={0}
        onClick={stopOuterLink}
        onMouseDown={stopOuterLink}
      >
        <span className="pm-navbar__logo">PayMeBack</span>
      </div>

      <ul className="pm-navbar__list">
        {items.map((it) => {
          const active = pathname === it.to || (it.to !== "/" && pathname.startsWith(it.to));
          return (
            <li key={it.to} className={"pm-navbar__item" + (active ? " pm-navbar__item--active" : "")}>
              {/* Use a button-like div so thereâ€™s no nested <a> */}
              <div
                role="link"
                tabIndex={0}
                className={"pm-navbar__link" + (active ? " pm-navbar__link--active" : "")}
                onClick={go(it.to)}
                onMouseDown={stopOuterLink}
                onKeyDown={(e) => {
                  if (e.key === "Enter" || e.key === " ") go(it.to)(e);
                }}
              >
                {it.label}
              </div>
            </li>
          );
        })}
      </ul>
    </nav>
  );
}
